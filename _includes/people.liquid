{% assign p = include.person %}
{% assign role = p.role | downcase | default: "" %}

/* Pick a ColorBrewer Dark2 color (as RGB) by role */
{% assign rgb = "102,102,102" %}  {# default / else #}
{% if role contains "leader" %}
  {% assign rgb = "27,158,119" %}
{% elsif role contains "phd" %}
  {% assign rgb = "217,95,2" %}
{% elsif role contains "postdoc" %}
  {% assign rgb = "117,112,179" %}
{% elsif role contains "master" or role contains "msc" %}
  {% assign rgb = "231,41,138" %}
{% endif %}

/* Opacities (tweak to taste) */
{% assign bg_alpha = "0.10" %}
{% assign br_alpha = "0.25" %}

<div 
  class="card h-100 hoverable"
  style="--bs-card-bg: rgba({{ rgb }}, {{ bg_alpha }}); --bs-card-border-color: rgba({{ rgb }}, {{ br_alpha }});"
>
  {% if person.img %}
    <img class="card-img-top" src="{{ person.img | relative_url }}" alt="{{ person.title }}">
  {% endif %}

  <!-- Make the body a vertical stack so links can sit at the very bottom -->
  <div class="card-body d-flex flex-column">

    <!-- Name -->
    <h5 class="card-title mb-1">{{ person.title }}</h5>

    <!-- Role -->
    {% if person.role %}
      <p class="text-muted mb-3">{{ person.role }}</p>
    {% endif %}

    <!-- Project and promotor -->
    {% if person.project %}
      <p class="mb-2">
	<strong class="me-1">Project:</strong>{{ person.project }}
      </p>
    {% endif %}

    {% if person.promotor %}
      <p class="mb-3">
	<strong class="me-1">Promotor:</strong>{{ person.promotor }}
      </p>
    {% endif %}
    
    <!-- Links at the very bottom -->
    <div class="mt-auto pt-3 border-top">
      <div class="d-flex flex-column gap-2 small">
        {% if person.email %}
          <a class="d-block text-decoration-none" href="mailto:{{ person.email }}">
            <i class="fas fa-envelope"></i> Email
          </a>
        {% endif %}
        {% if person.website %}
          <a class="d-block text-decoration-none" href="{{ person.website }}">
            <i class="fas fa-globe"></i> Website
          </a>
        {% endif %}
        {% if person.scholar %}
          <a class="d-block text-decoration-none" href="{{ person.scholar }}">
            <i class="ai ai-google-scholar"></i> Scholar
          </a>
        {% endif %}
        {% if person.github %}
          <a class="d-block text-decoration-none" href="https://github.com/{{ person.github }}">
            <i class="fab fa-github"></i> GitHub
          </a>
        {% endif %}
        {% if person.linkedin %}
          <a class="d-block text-decoration-none" href="https://www.linkedin.com/in/{{ person.linkedin }}">
            <i class="fab fa-linkedin"></i> LinkedIn
          </a>
        {% endif %}
        {% if person.twitter %}
          <a class="d-block text-decoration-none" href="https://twitter.com/{{ person.twitter }}">
            <i class="fab fa-x-twitter"></i> X
          </a>
        {% endif %}
      </div>
    </div>
  </div>
</div>
